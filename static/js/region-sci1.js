function chart(c,h,v){d3.select("#barSaveButton").select("image").remove();d3.select("#barSaveButton").append("image").attr("xlink:href","/static/region_explorer/images/save.png").attr("x","1050").attr("y","10").attr("id","image_Canvas_bar").attr("width","43").attr("height","40").on("click",function(a){document.getElementById("canvas-Bar-id").click()}).on("mouseover",function(a){d3.select(this).style("opacity",.6);this.parentNode.appendChild(this)}).on("mouseout",function(a){d3.select(this).style("opacity",
1);this.parentNode.appendChild(this)});var t=document.getElementById("level_1_Id").value,y=document.getElementById("level_0_Id").value;d3.selectAll("#bar_svg").remove();d3.selectAll(".bar_svg").remove();key=keyVal.filter(c);key2=yearVal.filter(h);datas=print_filter(key);var p=datas.sort(function(a,b){return a.value-b.value});h=[];for(var q=[],n=0,g=0;g<p.length;g++)h.push(+p[g].value);jStat(h).mean();jStat(h).median();jStat(h).stdev(!0);var f=jStat(h).quartiles();jStat(h).sum();var e=h[Math.floor(.75*
h.length)];if(0==e){n=1;for(g=0;g<p.length;g++)q.push(+p[g].value);var u=q[Math.floor(q.length/4)],e=q[Math.floor(.75*q.length)],r=e-u}else u=h[Math.floor(h.length/4)],e=h[Math.floor(.75*h.length)],r=e-u;for(var g=0;g<h.length;g++);var m=e+1.5*r,g=d3.max(h.filter(function(a){return function(b,c,e){return b<=a}}(m)),function(a){return a});d3.max(h.filter(function(a){return function(b,c,e){return b<a}}(g)),function(a){return a});var g=p.sort(function(a,b){return d3.descending(a.value,b.value)}),k=d3.min(g,
function(a){return+a.value}),l=d3.max(g,function(a){return+a.value});minvalue=k/10*9.6;minvalu=k/10*12;domain=[minvalue,l];var r=(domain[0]+domain[1])/2,x=(domain[0]+r)/2,z=(domain[1]+r)/2;quartilesVal_3=3*f[2];for(var w=[],g=0;g<p.length;g++)0<+p[g].value&&w.push(+p[g].value);quartilesVal_3=2*jStat(w).quartiles()[2];color=d3.scale.linear().range(colors).domain([minvalue,x,r,z,l]);g=datas.sort(function(a,b){return"inf"==a.value&&"inf"==b.value?0:"inf"==a.value?b.value-l:"inf"==b.value?l-a.value:"-inf"==
a.value&&"-inf"==b.value?0:"-inf"==b.value?b.value-a.value:"inf"==a.value?b.value-b.value:b.value-a.value});200<g.length?d3.selectAll("#bar-tab").style("overflow-x","auto"):d3.selectAll("#bar-tab").style("overflow-x","hidden");p=document.getElementById("level_1_Id");p=p.options[p.selectedIndex].innerHTML;w=document.getElementById("levelId").value;w=levelsData[y]["level"+w+""].toLowerCase();w=w.replace(/_/g," ").toTitleCase();d3.selectAll("#barloading").remove();p=""+("<li><span> "+p+' </span></li><li class="active"><span> All '+
w+"s </span></li>");0!=level1Array.length&&(p=document.getElementById("geo_level").value,w=levelsData[y]["level"+p+""].toLowerCase(),w=w.replace(/_/g," ").toTitleCase(),p="<li><span>Geography - "+w+" level <span></li>");document.getElementById("breadcrumb_id").innerHTML=p;!c||"IND_ROAD_01"!=c&&"IND_ROAD_02"!=c&&"IND_ROAD_03"!=c&&"IND_ROAD_04"!=c||(c=d3.select("#bar").append("svg").attr("width",650).attr("height",450).attr("id","bar_svg").append("g").attr("id","barChart").attr("transform","translate(-150,0)"),
c=c.append("svg:text").attr("class","nobar").attr("x",450).attr("y",150).attr("dy",".35em").attr("text-anchor","middle").style("font","100 20px sans-serif").text("This feature is not available for this variable."));if(k===l&&0===l)return range=[0,0,0,0,0],document.getElementById("meanId").innerHTML="",document.getElementById("medianId").innerHTML="",!1;if(0>k){f=[];for(g=0;g<datas.length;g++)d=[],d["0"]=datas[g].name_2+"_"+datas[g].id_2,d["1"]=+datas[g].value,f.push(d);d3.select("#bar").datum(f).call(columnChart().width(660).height(420).x(function(a,
b){return a[0]}).y(function(a,b){return a[1]}))}else if(m<l&&0!=m){c=(f[2]+minvalue)/2;k=(c+minvalue)/2;minvalue==c?(range=[minvalue,x,r,z,l],color=d3.scale.linear().range(colors).domain([minvalue,x,r,z,l])):(range=[minvalue,k,c,f[2],l],color=d3.scale.linear().range(colors).domain([minvalue,k,c,f[2],l]));f=d3.scale.ordinal().rangeRoundBands([0,530],.1);r=d3.scale.linear().range([500,0]);d3.svg.axis().scale(f).orient("bottom");d3.svg.axis().scale(r).orient("left").ticks(10,"%");var b=0;f.domain(g.map(function(a){return a.name_2}));
r.domain([0,d3.max(g,function(a){0<+a.value&&(b+=1);return+a.value})]);5>b&&(b+=5);c=d3.select("#bar").append("svg").attr("width",700).attr("height",450).attr("id","bar_svg").append("g").attr("id","barChart").attr("transform","translate(-140,50)");var A=d3.scale.linear().domain([minvalue,m]).range([320,100]).clamp(!0),a=d3.scale.linear().domain([m,l]).range([80,0]).clamp(!0);c.selectAll("rect.lower").data(g).enter().append("rect").attr("class","lower").attr("x",function(a,c){return 250+350/b*c}).attr("width",
200/b).attr("y",function(a){return"inf"==a.value?A(l):A(a.value)}).attr("height",function(a){return"inf"==a.value?320-A(l):320-A(a.value)}).style("fill",function(a){return"inf"==a.value?color(l):color(a.value)}).on("mouseover",function(a){d3.select("#spacialcontent").style("display","");var b=d3.mouse(d3.select(".lower")[0][0]);d3.select(this).style("opacity",.8).style("stroke-width",1.5);var c;c=isInteger(a.value)?a.value:numberFormatTitleValues(a.value);d3.select("#spacialcontent").html(a.name_2.toTitleCase()+
' <span class="value">('+c+')</span> &nbsp;<span style="color:NaN').style("top",b[1]+"px").style("left",b[0]+"px").style("opacity",1)}).on("mouseout",function(a){d3.select("#spacialcontent").style("display","none");d3.select(this).transition().duration(100).delay(200).style("opacity",1).style("stroke-width",0)}).on("contextmenu",function(a){snapLevel=3;snapURL="/snapshot#level0="+y+"&level1="+t+"&levelid="+a.id_2+"&levels=2";canvasImage="chart";snapshotRankPopup(y,t,a.id_2);$("#snapshot-popup-id").click();
d3.event.preventDefault()});c.selectAll("rect.upper").data(g).enter().append("rect").attr("class","upper").attr("x",function(a,c){return 250+350/b*c}).attr("width",200/b).attr("y",function(b){return"inf"==b.value?a(l):a(b.value)}).attr("height",function(b){return"inf"==b.value?l>=m?80-a(l):0:b.value>=m?80-a(b.value):0}).style("fill",function(a){return"inf"==a.value?color(l):color(a.value)}).on("mouseover",function(a){d3.select("#spacialcontent").style("display","");var b=d3.mouse(d3.select(".lower")[0][0]);
d3.select(this).style("opacity",.8).style("stroke-width",1.5);var c;c=isInteger(a.value)?a.value:numberFormatTitleValues(a.value);d3.select("#spacialcontent").html(a.name_2.toTitleCase()+' <span class="value">('+c+')</span> &nbsp;<span style="color:NaN').style("top",b[1]+"px").style("left",b[0]+"px").style("opacity",1)}).on("mouseout",function(a){d3.select("#spacialcontent").style("display","none");d3.select(this).transition().duration(100).delay(200).style("opacity",1).style("stroke-width",0)}).on("contextmenu",
function(a,b){snapLevel=3;snapURL="/snapshot#level0="+y+"&level1="+t+"&levelid="+a.id_2+"&levels=2";canvasImage="chart";snapshotRankPopup(y,t,a.id_2);$("#snapshot-popup-id").click();d3.event.preventDefault()});var B=d3.format(".2s");c.append("g").attr("transform","translate(240,0)").call(d3.svg.axis().scale(A).orient("left").ticks(6).tickFormat(function(a){return B(a)})).style({font:"Roboto, sans-serif","font-size":"10px",fill:"#5F5F5F"});d3.format(".2f");0==l%1&&d3.format(".0f");0<l/1E3&&d3.format(".1f");
c.append("g").attr("transform","translate(240,0)").call(d3.svg.axis().scale(a).orient("left").ticks(1).tickValues([l]).tickFormat(function(a){return B(a)})).style({font:"Roboto, sans-serif","font-size":"10px",fill:"#5F5F5F"})}else f=d3.scale.ordinal().rangeRoundBands([0,530],.1),r=d3.scale.linear().range([500,0]),d3.svg.axis().scale(f).orient("bottom"),d3.svg.axis().scale(r).orient("left").ticks(10,"%"),b=0,f.domain(g.map(function(a){return a.name_2})),r.domain([0,d3.max(g,function(a){0<+a.value&&
(b+=1);return+a.value})]),c=d3.select("#bar").append("svg").attr("width",700).attr("height",450).attr("id","bar_svg").append("g").attr("id","barChart").attr("transform","translate(-140,50)"),5>b&&(b+=5),A=d3.scale.linear().domain([minvalue,l]).range([320,0]).clamp(!0),c.selectAll("rect.lower").data(g).enter().append("rect").attr("class","lower").attr("x",function(a,c){return 250+350/b*c}).attr("width",200/b).attr("y",function(a){return"inf"==a.value?A(l):A(a.value)}).attr("height",function(a){return"inf"==
a.value?320-A(l):320-A(a.value)}).style("fill",function(a){return"inf"==a.value?color(l):color(a.value)}).on("mouseover",function(a){d3.select("#spacialcontent").style("display","");var b=d3.mouse(d3.select(".lower")[0][0]);d3.select(this).style("opacity",.8).style("stroke-width",1.5);var c;c=isInteger(a.value)?a.value:numberFormatTitleValues(a.value);d3.select("#spacialcontent").html(a.name_2.toTitleCase()+' <span class="value">('+c+')</span> &nbsp;<span style="color:NaN').style("top",b[1]+"px").style("left",
b[0]+"px").style("opacity",1)}).on("mouseout",function(a){d3.select("#spacialcontent").style("display","none");d3.select(this).transition().duration(100).delay(200).style("opacity",1).style("stroke-width",0)}).on("contextmenu",function(a,b){snapLevel=3;snapURL="/snapshot#level0="+y+"&level1="+t+"&levelid="+a.id_2+"&levels=2";canvasImage="chart";snapshotRankPopup(y,t,a.id_2);$("#snapshot-popup-id").click();d3.event.preventDefault()}),B=d3.format(".2s"),c.append("g").attr("transform","translate(240,0)").call(d3.svg.axis().scale(A).orient("left").ticks(6).tickFormat(function(a){if(1E5<
a){var b=d3.format(".2f");0==a%1&&(b=d3.format(".0f"));0<a/1E5&&(b=d3.format(".1f"));return valueRound(a,b)}return a})).style({font:"Roboto, sans-serif","font-size":"10px",fill:"#5F5F5F"});0==datas.length&&(c=d3.select("#bar").append("svg").attr("width",650).attr("height",450).attr("id","bar_svg").append("g").attr("id","barChart").attr("transform","translate(-150,0)"),f="",v&&(f=v.toTitleCase()),c=c.append("svg:text").attr("class","nobar").attr("x",450).attr("y",190).attr("dy",".35em").attr("text-anchor",
"middle").style("font","100 20px sans-serif").text("No Data at "+f+" level"),c.node().getBBox());0<e&&u!=e?1==n?histogramLoad(q):histogramLoad(h):(document.getElementById("meanId").innerHTML="",document.getElementById("medianId").innerHTML="")};function level_3_focus_Chart(c,h,v,t,y){d3.select("#barSaveButton").select("image").remove();d3.select("#barSaveButton").append("image").attr("xlink:href","/static/region_explorer/images/save.png").attr("x","1050").attr("y","10").attr("id","image_Canvas_bar").attr("width","43").attr("height","40").on("click",function(a){document.getElementById("canvas-Bar-id").click()}).on("mouseover",function(a){d3.select(this).style("opacity",.6);this.parentNode.appendChild(this)}).on("mouseout",function(a){d3.select(this).style("opacity",
1);this.parentNode.appendChild(this)});var p=document.getElementById("level_1_Id").value,q=document.getElementById("level_0_Id").value;document.getElementById("yearId");d3.selectAll("#bar_svg").remove();d3.selectAll(".bar_svg").remove();key=l3_KeyVal.filter(c);key2=l3_YearVal.filter(h);key3=l3_level_2.filter(v);datas=print_filter(key);var n=datas.sort(function(a,b){return a.value-b.value}),g=[];v=[];for(var f=0,e=0;e<n.length;e++)g.push(+n[e].value);jStat(g).mean();jStat(g).median();jStat(g).stdev(!0);
h=jStat(g).quartiles();jStat(g).sum();var u=g[Math.floor(.75*g.length)];if(0==u){f=1;for(e=0;e<n.length;e++)0<+n[e].value&&v.push(+n[e].value);var e=v[Math.floor(v.length/4)],u=v[Math.floor(.75*v.length)],r=u-e}else e=g[Math.floor(g.length/4)],u=g[Math.floor(.75*g.length)],r=u-e;0<u&&e!=u?1==f?histogramLoad(v):histogramLoad(g):(document.getElementById("meanId").innerHTML="",document.getElementById("medianId").innerHTML="");for(var e=0;e<g.length;e++);var m=u+1.5*r;v=d3.max(g.filter(function(a){return function(b,
c,e){return b<=a}}(m)),function(a){return a});d3.max(g.filter(function(a){return function(b,c,e){return b<a}}(v)),function(a){return a});var g=2*v,e=n.sort(function(a,b){return d3.descending(a.value,b.value)}),f=d3.min(e,function(a){return+a.value}),k=d3.max(e,function(a){return+a.value});minvalue=f/10*9.6;minvalu=f/10*12;domain=[minvalue,k];var u=(domain[0]+domain[1])/2,r=(domain[0]+u)/2,l=(domain[1]+u)/2;quartilesVal_3=3*h[2];for(var x=[],e=0;e<n.length;e++)0<+n[e].value&&x.push(+n[e].value);quartilesVal_3=
2*jStat(x).quartiles()[2];color=d3.scale.linear().range(colors).domain([minvalue,r,u,l,k]);range=[minvalue,r,u,l,k];e=datas.sort(function(a,b){return"inf"==a.value&&"inf"==b.value?0:"inf"==a.value?b.value-k:"inf"==b.value?k-a.value:b.value-a.value});200<e.length?d3.selectAll("#bar-tab").style("overflow-x","auto"):d3.selectAll("#bar-tab").style("overflow-x","hidden");n=document.getElementById("level_1_Id");n=n.options[n.selectedIndex].innerHTML;u=document.getElementById("levelId").value;u=parseInt(u)+
1;u=levelsData[q]["level"+u+""].toLowerCase();u=u.replace(/_/g," ").toTitleCase();d3.selectAll("#barloading").remove();r="";t?r=t:e&&e[0]&&e[0].name_2&&(r=e[0].name_2);t=""+("<li><span> "+n+" </span></li><li><span> "+r.toTitleCase()+' </span></li><li class="active"><span> All '+u+"s </span></li>");document.getElementById("breadcrumb_id").innerHTML=t;!c||"IND_ROAD_01"!=c&&"IND_ROAD_02"!=c&&"IND_ROAD_03"!=c&&"IND_ROAD_04"!=c||(c=d3.select("#bar").append("svg").attr("width",650).attr("height",450).attr("id",
"bar_svg").append("g").attr("id","barChart").attr("transform","translate(-150,0)"),c=c.append("svg:text").attr("class","nobar").attr("x",450).attr("y",150).attr("dy",".35em").attr("text-anchor","middle").style("font","100 20px sans-serif").text("This feature is not available for this variable."));if(f===k&&0===k)return range=[0,0,0,0,0],document.getElementById("meanId").innerHTML="",document.getElementById("medianId").innerHTML="",!1;if(0>f){h=[];for(e=0;e<datas.length;e++)d=[],d["0"]=datas[e].name_3+
"_"+datas[e].id_3,d["1"]=+datas[e].value,h.push(d);d3.select("#bar").datum(h).call(columnChart().width(660).height(420).x(function(a,b){return a[0]}).y(function(a,b){return a[1]}))}else if(m<k&&g<k){var z=0;c=(h[2]+minvalue)/2;t=(c+minvalue)/2;range=[minvalue,t,c,h[2],k];color=d3.scale.linear().range(colors).domain([minvalue,t,c,h[2],k]);h=d3.scale.ordinal().rangeRoundBands([0,350],.1);c=d3.scale.linear().range([500,0]);d3.svg.axis().scale(h).orient("bottom");d3.svg.axis().scale(c).orient("left").ticks(10,
"%");h.domain(e.map(function(a){return a.name_3}));c.domain([0,d3.max(e,function(a){0<+a.value&&(z+=1);return+a.value})]);c=d3.select("#bar").append("svg").attr("width",650).attr("height",450).attr("id","bar_svg").append("g").attr("id","barChart").attr("transform","translate(-140,50)");var w=d3.scale.linear().domain([minvalue,v]).range([320,100]).clamp(!0),b=d3.scale.linear().domain([v,k]).range([80,0]).clamp(!0);5>=z&&(z+=5);c.selectAll("rect.lower").data(e).enter().append("rect").attr("class","lower").attr("x",
function(a,b){return 250+350/z*b}).attr("width",200/z).attr("y",function(a){return"inf"==a.value?w(k):w(a.value)}).attr("height",function(a){return"inf"==a.value?320-w(k):320-w(a.value)}).style("fill",function(a){return"inf"==a.value?color(k):color(a.value)}).on("mouseover",function(a){d3.select("#spacialcontent").style("display","");var b=d3.mouse(d3.select(".lower")[0][0]);d3.select(this).style("opacity",.8).style("stroke-width",1.5);var c;c=isInteger(a.value)?a.value:numberFormatTitleValues(a.value);
d3.select("#spacialcontent").html(a.name_3.toTitleCase()+' <span class="value">('+c+')</span> &nbsp;<span style="color:NaN').style("top",b[1]+"px").style("left",b[0]+"px").style("opacity",1)}).on("mouseout",function(a){d3.select("#spacialcontent").style("display","none");d3.select(this).transition().duration(100).delay(200).style("opacity",1).style("stroke-width",0)}).on("contextmenu",function(a){snapLevel=3;snapURL="/snapshot#level0="+q+"&level1="+p+"&levelid="+a.id_3+"&levels=3";canvasImage="chart";
snapshotRankLevel3Popup(q,p,a.id_3);$("#snapshot-popup-id").click();d3.event.preventDefault()});c.selectAll("rect.upper").data(e).enter().append("rect").attr("class","upper").attr("x",function(a,b){return 250+350/z*b}).attr("width",200/z).attr("y",function(a){return"inf"==a.value?b(k):b(a.value)}).attr("height",function(a){return"inf"==a.value?k>=m?80-b(k):0:a.value>=m?80-b(a.value):0}).style("fill",function(a){return"inf"==a.value?color(k):color(a.value)}).on("mouseover",function(a){d3.select("#spacialcontent").style("display",
"");var b=d3.mouse(d3.select(".lower")[0][0]);d3.select(this).style("opacity",.8).style("stroke-width",1.5);var c;c=isInteger(a.value)?a.value:numberFormatTitleValues(a.value);d3.select("#spacialcontent").html(a.name_3.toTitleCase()+' <span class="value">('+c+')</span> &nbsp;<span style="color:NaN').style("top",b[1]+"px").style("left",b[0]+"px").style("opacity",1)}).on("mouseout",function(a){d3.select("#spacialcontent").style("display","none");d3.select(this).transition().duration(100).delay(200).style("opacity",
1).style("stroke-width",0)}).on("contextmenu",function(a){snapLevel=3;snapURL="/snapshot#level0="+q+"&level1="+p+"&levelid="+a.id_3+"&levels=3";canvasImage="chart";snapshotRankLevel3Popup(q,p,a.id_3);$("#snapshot-popup-id").click();d3.event.preventDefault()});c.append("g").attr("transform","translate(240,0)").call(d3.svg.axis().scale(w).orient("left").ticks(6).tickFormat(function(a){if(1E5<a){var b=d3.format(".2f");0==a%1&&(b=d3.format(".0f"));0<a/1E5&&(b=d3.format(".1f"));return valueRound(a,b)}return a})).style({font:"Roboto, sans-serif",
"font-size":"9px",fill:"#8A8A8A"});var A=d3.format(".2f");0==k%1&&(A=d3.format(".0f"));0<k/1E3&&(A=d3.format(".1f"));c.append("g").attr("transform","translate(240,0)").call(d3.svg.axis().scale(b).orient("left").ticks(1).tickValues([k]).tickFormat(function(a){return valueRound(k,A)})).style({font:"Roboto, sans-serif","font-size":"10px",fill:"#5F5F5F"})}else z=0,h=d3.scale.ordinal().rangeRoundBands([0,350],.1),c=d3.scale.linear().range([500,0]),d3.svg.axis().scale(h).orient("bottom"),d3.svg.axis().scale(c).orient("left").ticks(10,
"%"),h.domain(e.map(function(a){return a.name_3})),c.domain([0,d3.max(e,function(a){0<+a.value&&(z+=1);return+a.value})]),c=d3.select("#bar").append("svg").attr("width",650).attr("height",450).attr("id","bar_svg").append("g").attr("id","barChart").attr("transform","translate(-140,50)"),w=d3.scale.linear().domain([minvalue,k]).range([320,0]).clamp(!0),5>=z&&(z+=5),c.selectAll("rect.lower").data(e).enter().append("rect").attr("class","lower").attr("x",function(a,b){return 250+350/z*b}).attr("width",
200/z).attr("y",function(a){return"inf"==a.value?w(k):w(a.value)}).attr("height",function(a){return"inf"==a.value?320-w(k):320-w(a.value)}).style("fill",function(a){return"inf"==a.value?color(k):color(a.value)}).on("mouseover",function(a){d3.select("#spacialcontent").style("display","");var b=d3.mouse(d3.select(".lower")[0][0]);d3.select(this).style("opacity",.8).style("stroke-width",1.5);var c;c=isInteger(a.value)?a.value:numberFormatTitleValues(a.value);d3.select("#spacialcontent").html(a.name_3.toTitleCase()+
' <span class="value">('+c+')</span> &nbsp;<span style="color:NaN').style("top",b[1]+"px").style("left",b[0]+"px").style("opacity",1)}).on("mouseout",function(a){d3.select("#spacialcontent").style("display","none");d3.select(this).transition().duration(100).delay(200).style("opacity",1).style("stroke-width",0)}).on("contextmenu",function(a){snapLevel=3;snapURL="/snapshot#level0="+q+"&level1="+p+"&levelid="+a.id_3+"&levels=3";canvasImage="chart";snapshotRankLevel3Popup(q,p,a.id_3);$("#snapshot-popup-id").click();
d3.event.preventDefault()}),c.append("g").attr("transform","translate(240,0)").call(d3.svg.axis().scale(w).orient("left").ticks(4).tickFormat(function(a){if(1E5<a){var b=d3.format(".2f");0==a%1&&(b=d3.format(".0f"));0<a/1E5&&(b=d3.format(".1f"));return valueRound(a,b)}return a})).style({font:"Roboto, sans-serif","font-size":"9px",fill:"#8A8A8A"});0==datas.length&&(c=d3.select("#bar").append("svg").attr("width",650).attr("height",450).attr("id","bar_svg").append("g").attr("id","barChart").attr("transform",
"translate(-150,10)"),h="",h=y?y.toTitleCase():"this",c=c.append("svg:text").attr("class","nobar").attr("x",450).attr("y",190).attr("dy",".35em").attr("text-anchor","middle").style("font","100 20px sans-serif").text("No Data at "+h+" level"),c.node().getBBox())};function level_3_LevelChart(c,h,v,t){console.log("level_3_LevelChart");d3.select("#barSaveButton").select("image").remove();d3.select("#barSaveButton").append("image").attr("xlink:href","/static/region_explorer/images/save.png").attr("x","1050").attr("y","10").attr("id","image_Canvas_bar").attr("width","43").attr("height","40").on("click",function(b){document.getElementById("canvas-Bar-id").click()}).on("mouseover",function(b){d3.select(this).style("opacity",.6);this.parentNode.appendChild(this)}).on("mouseout",
function(b){d3.select(this).style("opacity",1);this.parentNode.appendChild(this)});var y=document.getElementById("level_1_Id").value,p=document.getElementById("level_0_Id").value;document.getElementById("yearId");d3.selectAll("#bar_svg").remove();d3.selectAll(".bar_svg").remove();key=l3_KeyVal.filter(c);key2=l3_YearVal.filter(h);datas=print_filter(key);var q=datas.sort(function(b,c){return b.value-c.value}),n=[];t=[];for(var g=0,f=0;f<q.length;f++)n.push(+q[f].value);jStat(n).mean();jStat(n).median();
jStat(n).stdev(!0);h=jStat(n).quartiles();jStat(n).sum();var e=n[Math.floor(.75*n.length)];if(0==e){g=1;for(f=0;f<q.length;f++)0<+q[f].value&&t.push(+q[f].value);t=t.sort(function(b,c){return d3.ascending(b,c)});var f=t[Math.floor(t.length/4)],e=t[Math.floor(.75*t.length)],u=e-f}else f=n[Math.floor(n.length/4)],e=n[Math.floor(.75*n.length)],u=e-f;0<e&&f!=e?1==g?histogramLoad(t):histogramLoad(n):(document.getElementById("meanId").innerHTML="",document.getElementById("medianId").innerHTML="");for(var f=
0;f<n.length;f++);var r=e+1.5*u;t=d3.max(n.filter(function(b){return function(c,a,e){return c<=b}}(r)),function(b){return b});d3.max(n.filter(function(b){return function(c,a,e){return c<b}}(t)),function(b){return b});var n=2*t,f=q.sort(function(b,c){return d3.descending(b.value,c.value)}),g=d3.min(f,function(b){return+b.value}),m=d3.max(f,function(b){return+b.value});minvalue=g/10*9.6;minvalu=g/10*12;domain=[minvalue,m];quartilesVal_3=3*h[2];for(var k=[],f=0;f<q.length;f++)0<+q[f].value&&k.push(+q[f].value);
quartilesVal_3=2*jStat(k).quartiles()[2];f=datas.sort(function(b,c){return"inf"==b.value&&"inf"==c.value?0:"inf"==b.value?c.value-m:"inf"==c.value?m-b.value:c.value-b.value});200<f.length?d3.selectAll("#bar-tab").style("overflow-x","auto"):d3.selectAll("#bar-tab").style("overflow-x","hidden");q=document.getElementById("level_1_Id");q=q.options[q.selectedIndex].innerHTML;e=document.getElementById("levelId").value;e=levelsData[p]["level"+e+""].toLowerCase();e=e.replace(/_/g," ").toTitleCase();d3.selectAll("#barloading").remove();
q=""+("<li><span> "+q+' </span></li><li class="active"><span> All '+e+"s </span></li>");0!=level1Array.length&&(q=document.getElementById("geo_level").value,e=levelsData[p]["level"+q+""].toLowerCase(),e=e.replace(/_/g," ").toTitleCase(),q="<li><span>Geography - "+e+" level <span></li>");document.getElementById("breadcrumb_id").innerHTML=q;!c||"IND_ROAD_01"!=c&&"IND_ROAD_02"!=c&&"IND_ROAD_03"!=c&&"IND_ROAD_04"!=c||(c=d3.select("#bar").append("svg").attr("width",650).attr("height",450).attr("id","bar_svg").append("g").attr("id",
"barChart").attr("transform","translate(-150,0)"),c=c.append("svg:text").attr("class","nobar").attr("x",450).attr("y",150).attr("dy",".35em").attr("text-anchor","middle").style("font","100 20px sans-serif").text("This feature is not available for this variable."));if(g===m&&0===m)return range=[0,0,0,0,0],document.getElementById("meanId").innerHTML="",document.getElementById("medianId").innerHTML="",!1;if(0>g){h=[];for(f=0;f<datas.length;f++)d=[],d["0"]=datas[f].name_3+"_"+datas[f].id_3,d["1"]=+datas[f].value,
h.push(d);d3.select("#bar").datum(h).call(columnChart().width(660).height(410).x(function(b,c){return b[0]}).y(function(b,c){return b[1]}))}else{var l=0;if(r<m&&n<m){0==h[2]?(c=(r-minvalue)/4,h=2*c,c*=3,range=[minvalue,h,c,r,m],color=d3.scale.linear().range(colors).domain([minvalue,h,c,r,m])):(c=(h[2]+minvalue)/2,n=(c+minvalue)/2,range=[minvalue,n,c,h[2],m],color=d3.scale.linear().range(colors).domain([minvalue,n,c,h[2],m]));h=d3.scale.ordinal().rangeRoundBands([0,350],.1);c=d3.scale.linear().range([500,
0]);d3.svg.axis().scale(h).orient("bottom");d3.svg.axis().scale(c).orient("left").ticks(10,"%");h.domain(f.map(function(b){return b.name_3}));c.domain([0,d3.max(f,function(b){0<+b.value&&(l+=1);return+b.value})]);5>=l&&(l+=5);c=d3.select("#bar").append("svg").attr("width",function(b){return 200>k.length?700:150+2*k.length}).attr("height",450).attr("id","bar_svg").append("g").attr("id","barChart").attr("transform","translate(-140,50)");var x=d3.scale.linear().domain([minvalue,t]).range([320,100]).clamp(!0),
z=d3.scale.linear().domain([t,m]).range([80,0]).clamp(!0);c.selectAll("rect.lower").data(f).enter().append("rect").attr("class","lower").attr("x",function(b,c){return 200>k.length?250+350/l*c:250+2*c}).attr("width",function(b,c){return 200>k.length?200/l:1}).attr("id",function(b,c){return"bar_H"+b.id}).attr("y",function(b){return"inf"==b.value?x(m):x(b.value)}).attr("height",function(b){return"inf"==b.value?320-x(m):320-x(b.value)}).style("fill",function(b){return"inf"==b.value?color(m):color(b.value)}).on("mouseover",
function(b){d3.select("#spacialcontent").style("display","");var c=d3.mouse(d3.select(".lower")[0][0]);d3.select(this).style("opacity",.8).style("stroke-width",1.5);var a;a=isInteger(b.value)?b.value:numberFormatTitleValues(b.value);d3.select("#spacialcontent").html(b.name_3.toTitleCase()+' <span class="value">('+a+')</span> &nbsp;<span style="color:NaN').style("top",c[1]+"px").style("left",c[0]+"px").style("opacity",1)}).on("mouseout",function(b){d3.select("#spacialcontent").style("display","none");
d3.select(this).transition().duration(100).delay(200).style("opacity",1).style("stroke-width",0)}).on("contextmenu",function(b){snapLevel=3;snapURL="/snapshot#level0="+p+"&level1="+y+"&levelid="+b.id_3+"&levels=3";canvasImage="chart";snapshotRankLevel3Popup(p,y,b.id_3);$("#snapshot-popup-id").click();d3.event.preventDefault()});c.selectAll("rect.upper").data(f).enter().append("rect").attr("class","upper").attr("x",function(b,c){return 200>k.length?250+350/l*c:250+2*c}).attr("width",function(b,c){return 200>
k.length?200/l:1}).attr("id",function(b,c){return"bar_H"+b.id}).attr("y",function(b){return"inf"==b.value?z(m):z(b.value)}).attr("height",function(b){return"inf"==b.value?m>=r?80-z(m):0:b.value>=r?80-z(b.value):0}).style("fill",function(b){return"inf"==b.value?color(m):color(b.value)}).on("mouseover",function(b){d3.select("#spacialcontent").style("display","");var c=d3.mouse(d3.select(".lower")[0][0]);d3.select(this).style("opacity",.8).style("stroke-width",1.5);var a;a=isInteger(b.value)?b.value:
numberFormatTitleValues(b.value);d3.select("#spacialcontent").html(b.name_3.toTitleCase()+' <span class="value">('+a+')</span> &nbsp;<span style="color:NaN').style("top",c[1]+"px").style("left",c[0]+"px").style("opacity",1)}).on("mouseout",function(b){d3.select("#spacialcontent").style("display","none");d3.select(this).transition().duration(100).delay(200).style("opacity",1).style("stroke-width",0)}).on("contextmenu",function(b){snapLevel=3;snapURL="/snapshot#level0="+p+"&level1="+y+"&levelid="+b.id_3+
"&levels=3";canvasImage="chart";snapshotRankLevel3Popup(p,y,b.id_3);$("#snapshot-popup-id").click();d3.event.preventDefault()});var w=d3.format(".2s");c.append("g").attr("transform","translate(240,0)").call(d3.svg.axis().scale(x).orient("left").ticks(6).tickFormat(function(b){return w(b)})).style({font:"Roboto, sans-serif","font-size":"9px",fill:"#8A8A8A"});d3.format(".2f");0==m%1&&d3.format(".0f");0<m/1E3&&d3.format(".1f");c.append("g").attr("transform","translate(240,0)").call(d3.svg.axis().scale(z).orient("left").ticks(1).tickValues([m]).tickFormat(function(b){return w(b)})).style({font:"Roboto, sans-serif",
"font-size":"10px",fill:"#5F5F5F"})}else l=0,h=d3.scale.ordinal().rangeRoundBands([0,530],.1),c=d3.scale.linear().range([0,500]),d3.svg.axis().scale(h).orient("bottom"),d3.svg.axis().scale(c).orient("left").ticks(10,"%"),h.domain(f.map(function(b){return b.name_3})),c.domain([0,d3.max(f,function(b){0<+b.value&&(l+=1);return+b.value})]),5>=l&&(l+=5),c=d3.select("#bar").append("svg").attr("width",function(b){return 200>k.length?700:150+2*k.length}).attr("height",450).attr("id","bar_svg").append("g").attr("id",
"barChart").attr("transform","translate(-140,50)"),x=d3.scale.linear().domain([minvalue,m]).range([320,0]).clamp(!0),c.selectAll("rect.lower").data(f).enter().append("rect").attr("class","lower").attr("x",function(b,c){return 200>k.length?250+350/l*c:250+2*c}).attr("width",function(b,c){return 200>k.length?200/l:1}).attr("id",function(b,c){return"bar_H"+b.id}).attr("y",function(b){return"inf"==b.value?x(m):x(b.value)}).attr("height",function(b){return"inf"==b.value?320-x(m):320-x(b.value)}).style("fill",
function(b){return"inf"==b.value?color(m):color(b.value)}).on("mouseover",function(b){d3.select("#spacialcontent").style("display","");var c=d3.mouse(d3.select(".lower")[0][0]);d3.select(this).style("opacity",.8).style("stroke-width",1.5);var a;a=isInteger(b.value)?b.value:numberFormatTitleValues(b.value);d3.select("#spacialcontent").html(b.name_3.toTitleCase()+' <span class="value">('+a+')</span> &nbsp;<span style="color:NaN').style("top",c[1]+"px").style("left",c[0]+"px").style("opacity",1)}).on("mouseout",
function(b){d3.select("#spacialcontent").style("display","none");d3.select(this).transition().duration(100).delay(200).style("opacity",1).style("stroke-width",0)}).on("contextmenu",function(b){snapLevel=3;snapURL="/snapshot#level0="+p+"&level1="+y+"&levelid="+b.id_3+"&levels=3";canvasImage="chart";snapshotRankLevel3Popup(p,y,b.id_3);$("#snapshot-popup-id").click();d3.event.preventDefault()}),w=d3.format(".2s"),c.append("g").attr("transform","translate(240,0)").call(d3.svg.axis().scale(x).orient("left").ticks(4).tickFormat(function(b){return w(b)})).style({font:"Roboto, sans-serif",
"font-size":"9px",fill:"#8A8A8A"})}0==datas.length&&(c=d3.select("#bar").append("svg").attr("width",650).attr("height",450).attr("id","bar_svg").append("g").attr("id","barChart").attr("transform","translate(-150,10)"),h="",h=v?v.toTitleCase():"this",c=c.append("svg:text").attr("class","nobar").attr("x",450).attr("y",190).attr("dy",".35em").attr("text-anchor","middle").style("font","100 20px sans-serif").text("No Data at "+h+" level"),c.node().getBBox())};function columnChart(){function c(c){c.each(function(c){r=c.length;m=d3.max(c,function(a){return+a[1]});c=c.map(function(a,b){return[p.call(c,a,b),q.call(c,a,b)]});n.domain(c.map(function(a){return a[0]})).rangeRoundBands([0,t-150-v.left-v.right],.2);g.domain(d3.extent(c.map(function(a){return a[1]}))).range([y-v.top-v.bottom,0]).nice();var b=d3.select(this).selectAll("svg").data([c]),f=b.enter().append("svg").attr("id","bar_svg").append("g");f.append("g").attr("class","bars");f.append("g").attr("class",
"y axis");f.append("g").attr("class","x axis zero");b.attr("width",t).attr("height",y);f=b.select("g").attr("transform","translate("+v.left+","+v.top+")");b=b.select(".bars").selectAll(".bar_svg").data(c);b.enter().append("rect");b.exit().remove();b.attr("class",function(a,b){isNaN(a[1]);return"bar"}).attr("x",function(a,b){return 5+305/r*b}).attr("y",function(a,b){return isNaN(a[1])?0>m?g(0):h(a):0>a[1]?g(0):h(a)}).attr("width",200/r).attr("height",function(a,b){return Math.abs(h(a)-g(0))}).on("mouseover",
function(a){var b=a[0].split("_");d3.mouse(d3.select(".bars")[0][0]);d3.select(this).style("opacity",.8).style("stroke-width",1.5);d3.select("#spacialcontent").style("display","");isNaN(a[1])?d3.select("#spacialcontent").html(b[0].toTitleCase()+' <span class="value">(Inf)</span> &nbsp;<span style="color:NaN').style("opacity",1):(a=isInteger(a[1])?a[1]:numberFormatTitleValues(a[1]),d3.select("#spacialcontent").html(b[0].toTitleCase()+' <span class="value">('+a+')</span> &nbsp;<span style="color:NaN').style("opacity",
1))}).on("mouseout",function(a){d3.select("#spacialcontent").style("display","none");d3.select(this).transition().duration(100).delay(200).style("opacity",1).style("stroke-width",0)}).on("contextmenu",function(a){snapLevel=k;a=a[0].split("_");2==snapLevel&&1==snapsht?(snapLevel=3,snapURL="/snapshot#level0="+x+"&level1="+l+"&levelid="+a[1]+"&levels=3",snapshotRankLevel3Popup(x,l,a[1])):3==snapLevel?(snapLevel=3,snapURL="/snapshot#level0="+x+"&level1="+l+"&levelid="+a[1]+"&levels=3",snapshotRankLevel3Popup(x,
l,a[1])):(snapURL="/snapshot#level0="+x+"&level1="+l+"&levelid="+a[1]+"&levels="+k+"",snapshotRankPopup(x,l,a[1]));$("#snapshot-popup-id").click();canvasImage="taluk";d3.event.preventDefault()}).style("fill",function(a){return color(a[1])});f.select(".x.axis").attr("transform","translate(0,"+(y-v.top-v.bottom)+")").call(u.orient("bottom"));f.select(".x.axis.zero").attr("transform","translate(0,"+g(0)+")").call(u.tickFormat("").tickSize(0));f.select(".y.axis").call(e).style({font:"Roboto, sans-serif",
"font-size":"10px",fill:"#5F5F5F"})})}function h(c){return isNaN(c[1])?g(m):g(c[1])}var v={top:50,right:80,bottom:50,left:120},t=550,y=350,p=function(c){return c[0]},q=function(c){return c[1]},n=d3.scale.ordinal(),g=d3.scale.linear(),f=d3.format(".2s"),e=d3.svg.axis().scale(g).orient("left").tickFormat(function(c){return f(c)}),u=d3.svg.axis().scale(n),r,m,k=document.getElementById("levelId").value,l=document.getElementById("level_1_Id").value,x=document.getElementById("level_0_Id").value;c.margin=
function(e){if(!arguments.length)return v;v=e;return c};c.width=function(e){if(!arguments.length)return t;t=e;return c};c.height=function(e){if(!arguments.length)return y;y=e;return c};c.x=function(e){if(!arguments.length)return p;p=e;return c};c.y=function(e){if(!arguments.length)return q;q=e;return c};return c};
