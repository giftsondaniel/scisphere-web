<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SciSphere | Filter</title>
<!-- map70 css -->
<link type="image/png" rel="icon" href="/static/images/favicon.ico" >
<!--<link type='text/css' rel='stylesheet' href='http://fonts.googleapis.com/css?family=Roboto:300,400,500' >-->
<link type="text/css" rel="stylesheet" href="/static/css/bootstrap.css" async />
<link type="text/css" rel="stylesheet" href="/static/css/bootstrap-switch.css" async />

<link type="text/css" rel="stylesheet" href="/static/css/jquery.selectBoxIt.css" async />
<link type="text/css" rel="stylesheet" href="/static/css/jquery-ui.css" async /> <!-- new added -->
<link type="text/css" rel="stylesheet" href="/static/css/custom.css" async />
<!--<link type="text/css" rel="stylesheet" href="/static/css/explorer.css" />-->

<!--<link rel='stylesheet' href='/static/css/iconic_stroke.css' type='text/css'/>-->
<!--<link rel='stylesheet' href='/static/css/font-awesome.css' type='text/css'/>-->
<!--<link type='text/css' rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" async />-->
<link type='text/css' rel='stylesheet' href='/static/js/font-awesome/css/font-awesome.css' async />
<!--<link type='text/css' rel="stylesheet" href='http://api.tiles.mapbox.com/mapbox.js/v1.0.3/mapbox.css' async/>-->
<link type='text/css' rel='stylesheet' href='/static/css/mapbox.css' async />
<link type='text/css' rel='stylesheet' href='/static/css/cilogi-marker.css' async />
<!--<link type='text/css' rel="stylesheet" href="//leafletjs.com/dist/leaflet.css" />-->
<!--<link type='text/css' rel="stylesheet" href="/static/js/leaflet-0.7.3/leaflet.css" />-->
<link type='text/css' rel="stylesheet" href="/static/filters_layers/new_layer/dist/MarkerCluster.css" async />
<link type='text/css' rel="stylesheet" href="/static/filters_layers/new_layer/dist/MarkerCluster.Default.css" async />
<link type='text/css' rel="stylesheet" href="/static/filters_layers/new_layer/screen.css" async />
<!--<link type='text/css' rel='stylesheet' href='/static/js/font-awesome/leaflet.awesome-markers.css' async />-->
<!--<link type='text/css' rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" >-->
<link type='text/css' rel='stylesheet' href='/static/css/bootstrap-switch.css' />
<script type='text/javascript' src="/static/js/bootstrap-switch.js"></script>
<!-- map70 js -->
<script type="text/javascript" src="/static/js/bowser.js"></script><!-- bowser -->
<script type="text/javascript" src="/static/js/1.9.1-jquery.min.js"></script> <!-- Main Library js-->
<!--<script type="text/javascript" src="http://malsup.github.com/min/jquery.form.min.js"></script> <!-- for ajax form submission--> 
<script type="text/javascript" src="/static/js/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="/static/js/jquery-ui.min.js"></script> <!-- Main Library js-->
<script type="text/javascript" src="/static/js/bootstrap.js"></script>
<script type="text/javascript" src="/static/js/bootstrap-switch.js"></script>

<script type="text/javascript" src="/static/js/jquery.combine.js"></script> 
<!--<script type="text/javascript" src="/static/js/jquery.easing.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.easing.1.3.js"></script> 
<script type="text/javascript" src="/static/js/jquery.selectBoxIt.js"></script> 
<script type="text/javascript" src="/static/js/jquery.bxslider.js"></script>
<script type="text/javascript" src="/static/js/jquery.mousewheel.js"></script>
<script type="text/javascript" src="/static/js/jquery.jscrollpane.min.js"></script>
<script type='text/javascript' src="/static/js/jquery.jqpagination.js"></script><!-- Pagination -->
<script type='text/javascript' src="/static/js/Modernizr.js"></script>
<script type='text/javascript' src="/static/js/bootstrap-slider.js"></script> 

<!-- download csv - popup window use -->
<script>window.L_PREFER_CANVAS = true;</script>
<script type="text/javascript" src='/static/js/jquery.plainmodal.js'></script>
<script type="text/javascript" src='/static/js/leaflet-image.js'></script>
<!-- map70 js -->
<script type="text/javascript" src="/static/js/underscore-min.js"></script>
<script type="text/javascript" src="/static/js/leaflet-0.7.3/leaflet.js"></script>
<!--<script src="//leafletjs.com/dist/leaflet.js"></script>-->
<script type="text/javascript" src="/static/filters_layers/new_layer/dist/leaflet.markercluster-src.js"></script>
<script type="text/javascript" src="/static/js/moment/2.0.0/moment.js"></script>
<script type="text/javascript" src="/static/js/crossfilter.js"></script>
<!--<script type="text/javascript" src="/static/js/queue.v1.min.js"></script>
<script type="text/javascript" src="/static/js/d3.v2.min.js"></script>-->
<script type="text/javascript" src="/static/js/bootbox.js"></script>
<script type="text/javascript" src="/static/region_explorer/js/jquery.ba-bbq.min.js"></script>
<!--<script type="text/javascript" src="/static/region_explorer/js/jquery.ba-bbq.js"></script>-->
<script type="text/javascript" src="/static/js/d3.v3.min.js" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/queue.v1.min.js"></script>
<script type="text/javascript" src="/static/js/topojson.v1.min.js"></script>

<!-- google map -->
<!--<script src="http://maps.google.com/maps/api/js?v=3&sensor=false"></script>-->
<script type="text/javascript" src="/static/js/Google.js"></script>
<!-- google map -->
<!--<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
<script src="http://matchingnotes.com/javascripts/leaflet-google.js"></script>-->
<script type="text/javascript" src="/static/js/stickytooltip.js"></script><!-- tooltip for popup on variables -->
<script type="text/javascript" src="/static/common_js/FileSaver.js"/>
<script type='text/javascript' src="/static/js/jquery.jqpagination.js"></script><!-- Pagination -->
<script type='text/javascript' src="/static/js/rangefix.js"></script><!-- rangefix -->
<!--<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>-->
<!--<script src="http://api.tiles.mapbox.com/mapbox.js/v1.0.3/mapbox.js"></script>-->
<script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.js"></script>
<script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-geodesy/v0.1.0/leaflet-geodesy.js"></script>

<!--  -->
<script type='text/javascript' src="/static/js/font-awesome/leaflet.awesome-markers.js"></script><!-- rangefix -->

<script type="text/javascript">
var orgid = {{orgID}};
var myTemplateForm = '{{myTemplateForm}}';

if(myTemplateForm){
    	myTemplateForm = myTemplateForm.replace(/&quot;/g,'"');
    	myTemplateForm = myTemplateForm.replace(/&#39;/g,'"');
    	myTemplateForm = myTemplateForm.replace(/None/g,'""');
    	myTemplateForm = myTemplateForm.replace(/u"/g,'"');
    	myTemplateForm = JSON.parse(myTemplateForm);
}
var subscriptionList = '{{subscriptionList}}';
var sub_list="";
if(subscriptionList){
	subscriptionList = subscriptionList.replace(/&quot;/g,'"');
	subscriptionList = subscriptionList.replace(/&#39;/g,'"');
	subscriptionList = subscriptionList.replace(/None/g,'""');
	subscriptionList = subscriptionList.replace(/u"/g,'"');
	sub_list = JSON.parse(subscriptionList);
}

 $(document).ready(function(){

	$(".carousel").carousel({interval: 0});
	$(".submenu-sec").bxSlider({slideWidth: 170,minSlides: 3,maxSlides: 6,moveSlides: 1,pager: false});
	var settings = {
		autoReinitialise: true
	};
	$(".scroll-pane").jScrollPane({autoReinitialise: true});
	$("#help").tooltip();
	$('.help').popover({
		trigger: 'hover',
		placement:'left'
	    });
	//$(".range").slider({});
	//$('.custom_selectbox').selectBoxIt({ defaultText: '', autoWidth: false });
	$('.popup-accordian li a').click(function(e) {
		if($(this).hasClass('acc-act')){
			$(this).removeClass('acc-act');
		}
		else{
			$('.popup-accordian li a').removeClass('acc-act');
			$(this).addClass('acc-act');
		}
        });
	//$(".scroll-pane").jScrollPane();


	/*-- Pagination start --*/
	/* grid pagination */
	$grid_table_rows = $('.popup-area-sec ul');
	var grid_table_row_limit = 4;
	var gridTotalPage = Math.ceil($grid_table_rows.length / grid_table_row_limit);
	var grid_page_table = function(page) {
		// calculate the offset and limit values
		var offset = (page - 1) * grid_table_row_limit,
			limit = page * grid_table_row_limit;
		// hide all table rows
		$grid_table_rows.hide();
		// show only the n rows
		$grid_table_rows.slice(offset, limit).show();
	}
	if(gridTotalPage==0){
		gridTotalPage=1;
	}
	$('.pagination').jqPagination({
		link_string	: '/?page={page_number}',
		max_page	: gridTotalPage,
		paged		: grid_page_table
	});
	/* grid pagination */

	/* variable pagination */
	$variable_table_rows = $('#load-master-variable tbody tr');
	var variable_table_row_limit = 6;
	var variableTotalPage = Math.ceil($variable_table_rows.length / variable_table_row_limit);
	var variable_page_table = function(page) {
		// calculate the offset and limit values
		var offset = (page - 1) * variable_table_row_limit,
			limit = page * variable_table_row_limit;
		// hide all table rows
		$variable_table_rows.hide();
		// show only the n rows
		$variable_table_rows.slice(offset, limit).show();
	}
	if(variableTotalPage==0){
		variableTotalPage=1;
	}
	$('.pagination-variable').jqPagination({
		link_string	: '/?page={page_number}',
		max_page	: variableTotalPage,
		paged		: variable_page_table
	});
	/* variable pagination */

	/* geostate pagination */
	$geostate_table_rows = $('#load-master-geography tbody tr');
	var geostate_table_row_limit = 6;
	var geostateTotalPage = Math.ceil($geostate_table_rows.length / geostate_table_row_limit);
	var geostate_page_table = function(page) {
		// calculate the offset and limit values
		var offset = (page - 1) * geostate_table_row_limit,
			limit = page * geostate_table_row_limit;
		// hide all table rows
		$geostate_table_rows.hide();
		// show only the n rows
		$geostate_table_rows.slice(offset, limit).show();
	}
	if(geostateTotalPage==0){
		geostateTotalPage=1;
	}
	$('.pagination-geostate').jqPagination({
		link_string	: '/?page={page_number}',
		max_page	: geostateTotalPage,
		paged		: geostate_page_table
	});
	/* geostate pagination */
	/* myvariable pagination */
	$myvariable_table_rows = $('#load-master-myvariable tbody tr');
	var myvariable_table_row_limit = 6;
	var myvariableTotalPage = Math.ceil($myvariable_table_rows.length / myvariable_table_row_limit);
	var myvariable_page_table = function(page) {
		// calculate the offset and limit values
		var offset = (page - 1) * myvariable_table_row_limit,
			limit = page * myvariable_table_row_limit;
		// hide all table rows
		$myvariable_table_rows.hide();
		// show only the n rows
		$myvariable_table_rows.slice(offset, limit).show();
	}
	if(myvariableTotalPage==0){
		myvariableTotalPage=1;
	}
	$('.pagination-myvariable').jqPagination({
		link_string	: '/?page={page_number}',
		max_page	: myvariableTotalPage,
		paged		: myvariable_page_table
	});
	/* myvariable pagination */

	/*-- Pagination end--*/
});
</script>
<script type="text/javascript">
$(document).ready(function(e) {
	$('.user-menu').slideUp(0);
    $('#drop-icon').click( function(event){/*.menu-icon*/
        event.stopPropagation();
        $('.user-menu').slideToggle(200);
    });
    $(document).click( function(){
        $('.user-menu').slideUp(100);
    });
});
</script>
<script type="text/javascript">
$(document).ready(function(){
	$('.item-panel-list2 li a').click(function(e) {
		if($(this).hasClass('acc-listact')){
			$(this).removeClass('acc-listact');
		}else{
			$('.item-panel-list2 li a').removeClass('acc-listact');
			$(this).addClass('acc-listact');
		}
    	});
	$('.range').on('slide',function(slideEvt){
		var p = $(this).attr('id');
		var s =p.substr(5, 3)
		$("#range-val"+s +" .min-val").text(slideEvt.value[0]);
		$("#range-val"+s +" .max-val").text(slideEvt.value[1]);

		//$("#"+p+"-val .min-val").text(slideEvt.value[0]);
		//$("#"+p+"-val .max-val").text(slideEvt.value[1]);

	});
	$('.range').on('click',function(slideEvt){
		var p = $(this).attr('id');
		var s =p.substr(5, 3)
		$("#range-val"+s +" .min-val").text(slideEvt.value[0]);
		$("#range-val"+s +" .max-val").text(slideEvt.value[1]);

		//$("#"+p+"-val .min-val").text(slideEvt.value[0]);
		//$("#"+p+"-val .max-val").text(slideEvt.value[1]);
	});

	
	$('.min-val').change(function(e) {
		var wrap_parent = $(this).parents('.range-sec');
		var slider_min_value;
		if($(this).val()!='' && $(wrap_parent).find('.max-val').val()!= ''){
			if(!isNaN($(this).val()) && !isNaN($(wrap_parent).find('.max-val').val())){
				var min_val = parseInt($(this).val());
				var max_val = parseInt($(wrap_parent).find('.max-val').val());
				if(min_val > max_val){
					$(this).val(max_val);
					$(wrap_parent).find('.max-val').val(min_val);
				}
				$(wrap_parent).find('.range').slider('setValue', [min_val,max_val]);
				slider_min_value = $(wrap_parent).find('.range').slider('getAttribute','min');
				if(min_val < slider_min_value)
					$(this).val(slider_min_value);
			}
		}
    });
	$('.max-val').change(function(e) {
        var wrap_parent = $(this).parents('.range-sec');
		var slider_max_value;
		if($(this).val()!= '' && $(wrap_parent).find('.min-val').val()!= ''){
			if(!isNaN($(this).val()) && !isNaN($(wrap_parent).find('.min-val').val())){
				var min_val = parseInt($(wrap_parent).find('.min-val').val());
				var max_val = parseInt($(this).val());
				if(min_val > max_val){
					$(this).val(min_val);
					$(wrap_parent).find('.min-val').val(max_val);
				}
				$(wrap_parent).find('.range').slider('setValue', [min_val,max_val]);
				slider_max_value = $(wrap_parent).find('.range').slider('getAttribute','max');
				if(max_val > slider_max_value)
					$(this).val(slider_max_value);
			}
		}
    });


});



function rangeSlider(){
	//$(".range").slider({});

	/**/
	$("[name='my-checkbox']").bootstrapSwitch();
	
	/*$('#bnk').slider({
		formatter: function(value) {
			return 'Current value: ' + value;
		}
	});
	$('.range-boolean').slider({
		formatter: function(value) {console.log(value);
			return 'Current value: ' + value;
		}
	});
	$('.range-boolean').on('slide',function(slideEvt){
		var p = $(this).attr('id');
		var s =p.substr(5, 3);
		console.log(p);
	});*/
       $(".range_boolean").slider({ formater: function(v) {
		var p = $(this);
		var minValue = (p[0].min);
		var maxValue = (p[0].max);
		var minValueLabel = false;
		var maxValueLabel = true;

		$("#"+p[0].element[0].id+"-val .min-val").val(minValueLabel);
		$("#"+p[0].element[0].id+"-val .max-val").val(maxValueLabel);
		/*if(minValue == maxValue){
			$("#"+p[0].element[0].id+"-val .max-val").val(p[0].value[0]);
			p[0].value[1] = p[0].value[0];
		}else{
			$("#"+p[0].element[0].id+"-val .max-val").val(p[0].value[1]);
		}*/
	}});

	$('.range_boolean').on('slide',function(slideEvt){console.log("slide");
		var p = $(this).attr('id');
		var s =p.substr(5, 3);
	
		$("#"+p+"-val .min-val").val(slideEvt.value[0]);
		if(slideEvt.value[0] == slideEvt.value[1]){
			$("#"+p+"-val .max-val").val(slideEvt.value[0]);
			slideEvt.value[1] = slideEvt.value[0];
		}else{
			$("#"+p+"-val .max-val").val(slideEvt.value[1]);
		}
	});
	$('.range_boolean').on('click',function(slideEvt){console.log("slider click");
		var p = $(this).attr('id');
		var s =p.substr(5, 3)

		$("#"+p+"-val .min-val").val(slideEvt.value[0]);
		if(slideEvt.value[0] == slideEvt.value[1]){
			$("#"+p+"-val .max-val").val(slideEvt.value[0]);
			slideEvt.value[1] = slideEvt.value[0];
		}else{
			$("#"+p+"-val .max-val").val(slideEvt.value[1]);
		}
	});

	/**/


        $(".range").slider({ formater: function(v) {
		var p = $(this);
		var minValue = (p[0].min);
		var maxValue = (p[0].max);
		var differenceValue = ((maxValue - minValue)/10);

		//$("#"+p[0].element[0].id+"-val .min-val").val(valueRoundSnapshot(p[0].value[0], differenceValue));

		$("#"+p[0].element[0].id+"-val .min-val").val(p[0].value[0]);
		if(minValue == maxValue){
			$("#"+p[0].element[0].id+"-val .max-val").val(p[0].value[0]);
			p[0].value[1]=p[0].value[0];
		}else{
			$("#"+p[0].element[0].id+"-val .max-val").val(p[0].value[1]);
		}
	}});



	$('.range').on('slide',function(slideEvt){
		var p = $(this).attr('id');
		var s =p.substr(5, 3);

		$("#"+p+"-val .min-val").val(slideEvt.value[0]);
		if(slideEvt.value[0] == slideEvt.value[1]){
			$("#"+p+"-val .max-val").val(slideEvt.value[0]);
			slideEvt.value[1] = slideEvt.value[0];
		}else{
			$("#"+p+"-val .max-val").val(slideEvt.value[1]);
		}

	});


	$('.range').on('click',function(slideEvt){
		var p = $(this).attr('id');
		var s =p.substr(5, 3)

		$("#"+p+"-val .min-val").val(slideEvt.value[0]);
		if(slideEvt.value[0] == slideEvt.value[1]){
			$("#"+p+"-val .max-val").val(slideEvt.value[0]);
			slideEvt.value[1] = slideEvt.value[0];
		}else{
			$("#"+p+"-val .max-val").val(slideEvt.value[1]);
		}
	});


	$('.min-val').change(function(e) {console.log("minval");
		var wrap_parent = $(this).parents('.range-sec');
		var slider_min_value;
		if($(this).val()!='' && $(wrap_parent).find('.max-val').val()!= ''){
			if(!isNaN($(this).val()) && !isNaN($(wrap_parent).find('.max-val').val())){

				var min_val = parseFloat($(this).val());
				var max_val = parseFloat($(wrap_parent).find('.max-val').val());

				if(min_val > max_val){
					$(this).val(max_val);
					$(wrap_parent).find('.max-val').val(min_val);
				}

				$(wrap_parent).find('.range').slider('setValue', [min_val,max_val]);
				slider_min_value = $(wrap_parent).find('.range').slider('getAttribute','min');

				if(min_val < slider_min_value)
					$(this).val(slider_min_value);

			}
		}
   	});
	$('.max-val').change(function(e) {
        var wrap_parent = $(this).parents('.range-sec');
		var slider_max_value;
		if($(this).val()!= '' && $(wrap_parent).find('.min-val').val()!= ''){
			if(!isNaN($(this).val()) && !isNaN($(wrap_parent).find('.min-val').val())){
				var min_val = parseFloat($(wrap_parent).find('.min-val').val());
				var max_val = parseFloat($(this).val());

				if(min_val > max_val){
					$(this).val(min_val);
					$(wrap_parent).find('.min-val').val(max_val);
				}
				$(wrap_parent).find('.range').slider('setValue', [min_val,max_val]);
				slider_max_value = $(wrap_parent).find('.range').slider('getAttribute','max');
				if(max_val > slider_max_value)
					$(this).val(slider_max_value);
			}
		}
    	});

}

function isInt(n) {
   return n % 1 === 0;
}

function myVarRangeSlider(){
	//$(".range").slider({});

        $(".range1").slider({ formater: function(v) {
		var p = $(this);
		var minValue = (p[0].min);
		var maxValue = (p[0].max);
		var differenceValue = ((maxValue - minValue)/10);

		//$("#"+p[0].element[0].id+"-val .min-val").val(valueRoundSnapshot(p[0].value[0], differenceValue));

		$("#"+p[0].element[0].id+"-val .min-val").val(p[0].value[0]);
		if(minValue == maxValue){
			$("#"+p[0].element[0].id+"-val .max-val").val(p[0].value[0]);
			p[0].value[1] = p[0].value[0];
		}else{
			$("#"+p[0].element[0].id+"-val .max-val").val(p[0].value[1]);
		}
	}});

	$('.range1').on('slide',function(slideEvt){
		var p = $(this).attr('id');
		var s =p.substr(5, 3);

		$("#"+p+"-val .min-val").val(slideEvt.value[0]);
		if(slideEvt.value[0] == slideEvt.value[1]){
			$("#"+p+"-val .max-val").val(slideEvt.value[0]);
			slideEvt.value[1] = slideEvt.value[0];
		}else{
			$("#"+p+"-val .max-val").val(slideEvt.value[1]);
		}
	});
	$('.range1').on('click',function(slideEvt){
		var p = $(this).attr('id');
		var s =p.substr(5, 3)

		$("#"+p+"-val .min-val").val(slideEvt.value[0]);
		if(slideEvt.value[0] == slideEvt.value[1]){
			$("#"+p+"-val .max-val").val(slideEvt.value[0]);
			slideEvt.value[1] = slideEvt.value[0];
		}else{
			$("#"+p+"-val .max-val").val(slideEvt.value[1]);
		}
	});


	$('.min-val').change(function(e) {
		var wrap_parent = $(this).parents('.range-sec');
		var slider_min_value;
		if($(this).val()!='' && $(wrap_parent).find('.max-val').val()!= ''){
			if(!isNaN($(this).val()) && !isNaN($(wrap_parent).find('.max-val').val())){

				var min_val = parseFloat($(this).val());
				var max_val = parseFloat($(wrap_parent).find('.max-val').val());

				if(min_val > max_val){
					$(this).val(max_val);
					$(wrap_parent).find('.max-val').val(min_val);
				}
				$(wrap_parent).find('.range1').slider('setValue', [min_val,max_val]);
				slider_min_value = $(wrap_parent).find('.range1').slider('getAttribute','min');
				if(min_val < slider_min_value)
					$(this).val(slider_min_value);
			}
		}
   	});
	$('.max-val').change(function(e) {
        var wrap_parent = $(this).parents('.range-sec');
		var slider_max_value;
		if($(this).val()!= '' && $(wrap_parent).find('.min-val').val()!= ''){
			if(!isNaN($(this).val()) && !isNaN($(wrap_parent).find('.min-val').val())){

				var min_val = parseFloat($(wrap_parent).find('.min-val').val());
				var max_val = parseFloat($(this).val());

				if(min_val > max_val){
					$(this).val(min_val);
					$(wrap_parent).find('.min-val').val(max_val);
				}
				$(wrap_parent).find('.range1').slider('setValue', [min_val,max_val]);
				slider_max_value = $(wrap_parent).find('.range1').slider('getAttribute','max');
				if(max_val > slider_max_value)
					$(this).val(slider_max_value);
			}
		}
    	});

       /* $(".range1").slider({ formater: function(v) {
		var p = $(this);
		var minValue = (p[0].min);
		var maxValue = (p[0].max);
		var differenceValue = ((maxValue - minValue)/10);		

		$("#"+p[0].element[0].id+"-val .min-val").text(valueRoundSnapshot(p[0].value[0], differenceValue));
		//$("#"+p[0].element[0].id+"-val .max-val").text(valueRoundSnapshot(p[0].value[1], differenceValue));
		if(minValue == maxValue){
			$("#"+p[0].element[0].id+"-val .max-val").text(valueRoundSnapshot(p[0].value[0], differenceValue));
			p[0].value[1] = p[0].value[0];
		}else{
			$("#"+p[0].element[0].id+"-val .max-val").text(valueRoundSnapshot(p[0].value[1], differenceValue));
		}
	
	}});


	$('.range1').on('slide',function(slideEvt){

		var minValue = (slideEvt.target.dataset.sliderMin);
		var maxValue = (slideEvt.target.dataset.sliderMax);
		var differenceValue = ((maxValue - minValue)/10);		
		var p = $(this).attr('id');
		var s =p.substr(5, 3)

		$("#"+p+"-val .min-val").text(valueRoundSnapshot(slideEvt.value[0], differenceValue));
		if(minValue == maxValue){
			//$("#"+p+"-val .max-val").text(valueRoundSnapshot(slideEvt.value[1], differenceValue));
			$("#"+p+"-val .max-val").text(valueRoundSnapshot(slideEvt.value[0], differenceValue));
			slideEvt.target.dataset.sliderMax = slideEvt.target.dataset.sliderMin;
		}else{
			$("#"+p+"-val .max-val").text(valueRoundSnapshot(slideEvt.value[1], differenceValue));
		}


	});

	$('.range1').on('click',function(slideEvt){

		var p = $(this).attr('id');
		var s =p.substr(5, 3)

		$("#"+p+"-val .min-val").text(slideEvt.value[0]);
		if(slideEvt.value[0] == slideEvt.value[1] ){
			$("#"+p+"-val .max-val").text(slideEvt.value[0]);
			slideEvt.value[1] = slideEvt.value[0]
		} else {
			$("#"+p+"-val .max-val").text(slideEvt.value[1]);
		}
			
	});*/

}



function valueRoundSnapshot(d, diff){

	var Value;
	var valString = d.toString().split('.');
	var valInteger = valString[0].length;
	var val = d;

	var numberFormat = d3.format(".0f");
	var numberFormat1 = d3.format(".1f");
	var numberFormat2 = d3.format(".2f");
	    var Value;
	    if ((valInteger > 0) && (valInteger <= 3)) {
		Value = (numberFormat(d) + " ");
		if(diff < 1){
	     var spltCheckVal = d.toString().split('.')
			if(spltCheckVal[1]){
			    if((spltCheckVal[1].toString().length == 1)){
				Value = (numberFormat1(d) + " ");
			    } else if((spltCheckVal[1].toString().length > 1)){
				Value = (numberFormat2(d) + " ");
			    }				
			}
		}
	    }
	    if ((valInteger > 3) && (valInteger <= 6)) {
		finalValue = val / 1000;
			Value = (numberFormat1(finalValue) + " K");
			var checkVal = numberFormat1(finalValue).toString().length;
			var spltCheckVal = Value.split('.')
			if(spltCheckVal[1][0] == '0'){
				Value = (numberFormat(finalValue) + " K");
			}
	    }
	    if ((valInteger > 6) && (valInteger <= 9)) {
		finalValue = val / 1000000;
			Value = (numberFormat2(finalValue) + " M");
	    }
	    if (valInteger > 9) {
		finalValue = val / 1000000000;
			Value = (numberFormat1(finalValue) + " B");
	    }
	return Value;
}


function myVariableListDown(){
	
	/*-- Left Panel Accordian --*/
	$('.explore-leftpane-acc .panel .acc-head').click(function(e) {
		if($(this).hasClass('acc-listact')){
			$(this).removeClass('acc-listact');
		}else{
			$(this).addClass('acc-listact');
		}
    });
	/*-- /Left Panel Accordian --*/
	/*-- Popup Pagination --*/
	$('.pagination').jqPagination({
		link_string	: '/?page={page_number}',
		max_page	: 1000,
		paged		: function(page) {
			$('.log').prepend('<li>Requested page ' + page + '</li>');
		}
	});
	/*-- /Popup Pagination --*/
	/*-- Popup Accordian Act/Deact --*/
	$('.popup-accordian li a').click(function(e) {
		if($(this).hasClass('acc-act')){ $(this).removeClass('acc-act');}
		else{
			$('.popup-accordian li a').removeClass('acc-act');
			$(this).addClass('acc-act');
		}
    });
	/*-- /Popup Accordian Act/Deact --*/
	$('.drop-content').stop().slideUp(100);
	$('.pop-vari-trig').click(function(event) {
		event.preventDefault();
		event.stopPropagation();
		$('.pop-dropdown-wrap').removeClass('pop-dropdown-act');
		$(this).parent('.drop-head').parent('.pop-dropdown-wrap').addClass('pop-dropdown-act');
		
		$('.drop-content').stop().slideUp(100);
		$(this).parent('.drop-head').next('.drop-content').stop().slideDown(200);
		
		if($(this).hasClass('pop-vari-trig-act')){
			$(this).removeClass('pop-vari-trig-act');
			$('.drop-content').stop().slideUp(100);
			$('.pop-dropdown-wrap').removeClass('pop-dropdown-act');
		}else{
			$('.pop-vari-trig').removeClass('pop-vari-trig-act');
			$(this).addClass('pop-vari-trig-act');
		}
    });
	$(document).click(function(e) {
		$('.drop-content').slideUp(100);
		$('.drop-content').removeClass('pop-vari-trig-act');
		$('.pop-dropdown-wrap').removeClass('pop-dropdown-act');
    });
	
	/*-- Left Panel Add button trigger --*/
	$('.panel .head-sec .add').click(function(event) {
        var add_id = $(this).attr('id');
		var id_val = add_id.split(/\-/)[1];
		$('.pop-acc-title').removeClass('acc-act');
		$('#acc-'+id_val+'-title').addClass('acc-act');
		$('.pop-acc-content').removeClass('in');
		$('.pop-acc-content').css({'height':''});
		$('#pop-'+id_val).addClass('in');
    });

}

</script>
<script type="text/javascript">
	$(document).ready(function() {
		var stick_item = $("#item-btn-float");
		var item_width = stick_item.width();
		var stickermax =  $("#context-var").position().top+$("#context-var").outerHeight(true); //40 value is the total of the top and bottom margin
		$(window).scroll(function() {
			var windowpos = $(window).height()+$(window).scrollTop();
			if ((windowpos <= stickermax)) {
				stick_item.css('width',item_width);
				stick_item.addClass("stick");//stick it
			} else if (windowpos >=stickermax) {
				stick_item.css('width','');
				stick_item.removeClass("stick"); //un-stick
			}
		});
		$(window).resize(function(e) {
			item_width = stick_item.width();
		});
	});
</script>
</head>
<body>
<!-- -->
<div class="main">
    {% include "header-primary.html" %}  
    <!-- Secondary Header -->
    <header class="navbar sub-header">
    	<div class="container">
        	<div class="submenu-sec">
                <div class="sub-menu"><a href="{% url 'filters_layers' %}" class="active" title="Filter">
                	<span class="submenu-icon" id="submenu-filter"></span>
                    	<span class="submneu-con">Filter</span>
                    	<span class="submenu-arrow"></span></a>
		</div>
                <div class="sub-menu"><a href="{% url 'region_explorer' %}" title="Region">
                	<span class="submenu-icon" id="submenu-region"></span>
                    	<span class="submneu-con">Region</span>
                    	<span class="submenu-arrow"></span></a>
		</div>
            	<div class="sub-menu"><a href="{% url 'snapshot' %}" title="Snapshot">
                	<span class="submenu-icon" id="submenu-snap"></span>
                    	<span class="submneu-con">Snapshot</span>
                    	<span class="submenu-arrow"></span></a>
		</div>
              <div class="sub-menu"><a href="{% url 'trend' %}" title="Trend">
                	<span class="submenu-icon" id="submenu-trend"></span>
                    	<span class="submneu-con">Trend</span>
                    	<span class="submenu-arrow"></span></a>
		</div>
              <!--<div class="sub-menu"><a href="{% url 'region_compare' %}" title="Compare">
                	<span class="submenu-icon" id="submenu-region"></span>
                     	<span class="submneu-con">Compare</span>
                    	<span class="submenu-arrow"></span></a>
		</div>-->
		<div class="sub-menu"><a href="{% url 'correlate' %}" title="Correlate" >
			<span class="submenu-icon" id="submenu-corr"></span>
			<span class="submneu-con">Correlate</span>
                    	<span class="submenu-arrow"></span></a>
		</div>
            </div>
        </div>	
    </header>
    <!-- Secondary Header -->

    <div class="body-sec">
    	<div class="container">
            <!--Main body left panel -->
            <div class="col-md-2-5 left-panel">
		<!-- Geography start -->
                <div class="item-panel" id="geo-panel">
                   <h5 class="left-con-head">Geography
			<!--<a class="add" data-toggle="modal" data-target=".contextual-variable" title="Geography" onclick='geoClick();'></a>-->
		   </h5>
		   <div id="menu-div" style="display:none">
		      <div id="mylocation-div"></div><hr>
                      <select id="level0Id" onchange="level0Change()" class="custom_selectbox">
		         <option value="0" disabled="true" >Select Country</option>
		      </select>
                      <select id="level1Id" onchange="level1Change()" class="custom_selectbox">
			 <option value="0" >Loading Data...</option>
		      </select>
                      <select id="levelId" onchange="levelChange()" class="custom_selectbox">
			 <option value="0" >Select Level</option>
		      </select>
                      <select id="level2Id" class="custom_selectbox" style="display:none">
			 <option value="0">Select District</option>
		      </select>
                      <select id="yearId" style="display:none">
			 <option value="0" >Select Year</option>
		      </select>
		   </div>
                </div>
		<!-- Geography end -->
		<!-- Contextual Variables start -->
                <div class="item-panel pos-rel" id="context-var">
                    <h5 class="left-con-head">Contextual Variables<a class="add" data-toggle="modal" data-target=".contextual-variable" onclick='contextClick();'></a></h5>
                    <!-- Pop Up Panel -->
                    <div class="modal fade contextual-variable" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
                      <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"></span><span class="sr-only">Close</span></button>
                            <div class="popup-panel">
                            	<ul class="nav navbar-nav popup-accordian" id="accordion">
					<!-- Geography Panel-->
                                        <li class="panel">
                                            <a data-toggle="collapse" data-target="#pop-geo" data-parent="#accordion" class="pop-acc-title">Geography<span class="acc-arrow"></span></a>
                                            <div id="pop-geo" class="collapse pop-acc-content">
                                                <!--  GEO   -->
						   <div class="popup-content-wrap clearfix">
                                                	<div class="popup-leftpanel">
                                                        <div class="variable-list-sec">
                                                            <h5 class="variable-title">Selected State<span id="selected-geostate-count"></span></h5>
                                                            <table border="0" width="100%" class="variable-table" id="selected-geostate"></table>
                                                        </div>
                                                        <span class="pop-leftbottom-con">you can remove a state from the list by clicking the trash icon next to it.</span>
                                                    </div>
                                                	<div class="popup-rightpanel">
                                                    	<div class="popup-right-content-sec">
                                                        	<!-- Category -->
                                                        	<div class="category-wrap">
                                                                <h4 class="pop-left-head">Selected Country</h4>
                                                                <div class="popup-selectbox-sec">
                                                                    <select class="custom_selectbox popup-selectbox" id="geoCountryId" onchange="loadGeoState()">
                                                                    </select>
                                                                </div>    
                                                            </div>
                                                            <!-- GEO State List Table -->
                                                            <table width="100%" border="0" class="popup-table" id="load-master-geography"></table>
                                                            <!-- -->
                                                            <div class="pagi-wrap">
                                                                <div class="pull-right">
                                                                  <!-- Pagination Start -->
                                                                    <div class="gigantic pagination-geostate" id="geo_pg1">
                                                                        <a href="#" class="first" data-action="first">First</a>
                                                                        <a href="#" class="previous" data-action="previous"><span></span></a>
                                                                        <input type="text" readonly="readonly" class="page-field"/>
                                                                        <a href="#" class="next" data-action="next"><span></span></a>
                                                                        <a href="#" class="last" data-action="last">Last</a>
                                                                        <div class="pagi-goto"><span>Go to</span> <input type="text" class="goto-field" value="" id="pg-geo-goto" onchange="geoPaginationGoTo();"/></div>
                                                                    </div>
                                                                <!-- Pagination Start -->  
                                                                </div>
                                                            </div>
                                                            <!-- -->
                                                        </div>
                                                    </div>
                                                </div>
					        <!--  GEO   -->
                                            </div>
                                        </li>
					<!-- Contextual Variables Panel-->
                                        <li class="panel">
                                            <a data-toggle="collapse" data-target="#pop-contextual" data-parent="#accordion" class="pop-acc-title acc-act">Contextual Variables<span class="acc-arrow"></span></a>
                                            <div id="pop-contextual" class="collapse pop-acc-content clearfix" >
                                            	<div class="popup-title-wrap">
                                                	<div class="pop-right-title-section">
                                                    	<p>You can select a maximum of 10 variables, <a class="tot-sel" data-toggle="modal" data-target=".total-select" title="Variables"><span id="selected-variable-count-title"></span> selected</a>.Click on a Variable to select it</p>
                                                    	<!--<div class="input-group">
                                                          <input class="search-field" type="email" placeholder="">
                                                          <div class="input-group-addon"><input type="button"  class="search-button"/></div>
                                                        </div>-->
							      <!-- Search Variable -->
							      <div class="input-group">
								<input class="search-field"  type="text" name="search" value="" id="id_search2" placeholder="Search Variable" onchange="textSearch();"onkeyup="this.onchange();" onpaste="this.onchange();"
											 oninput="this.onchange();" /> <span class="loading"></span>
								<div class="input-group-addon">
								  <input type="button" class="search-button">
								</div>
							      </div>		
                                                        
                                                        <div class="modal fade total-select" tabindex="2" role="dialog" aria-labelledby="" aria-hidden="true">
                                                             <div class="modal-dialog modal-md">
                                                                <div class="modal-content modal-conatiner-small">
                                                                  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"></span><span class="sr-only">Close</span></button><!-- Close -->
                                                                  <div class="popup-small-sec">
                                                                    <p class="center-text">You can select only 10 variables at a time</p>
                                                                    <div class="button-wrap" >
                                                                        <button type="button" class="btn btn-primary btn-gray" data-toggle="button">ok</button>
                                                                    </div>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            	<div class="popup-content-wrap clearfix">
                                                	<div class="popup-leftpanel">
                                                        <div class="variable-list-sec">
                                                        	<h5 class="variable-title">Selected Variables<span id="selected-variable-count"></span></h5>
                                                            <table border="0" width="100%" class="variable-table" id="selected-variable"></table>
                                                        </div>
                                                        <span class="pop-leftbottom-con">you can remove a variable from the list by clicking the X icon next to it.</span>
                                                        </div>
                                                	<div class="popup-rightpanel">
                                                    	<div class="popup-right-content-sec">
                                                        	<!-- Category -->
                                                        	<div class="category-wrap">
                                                                <h4 class="pop-left-head">Selected Category</h4>
                                                                <div class="popup-selectbox-sec">
                                                                    <select class="custom_selectbox popup-selectbox" id="variableCategoryId" onchange="loadVariable()">
                                                                        <option value="allcategories">All Category</option>
                                                                    </select>
                                                                </div>    
                                                            </div>
                                                            <!-- Variable List Table -->
                                                            <table width="100%" border="0" class="popup-table" id="load-master-variable"></table>
                                                            <!-- -->
                                                            <div class="pagi-wrap">
                                                                <div class="pull-right">
                   	                                       <!-- Pagination Start -->
                                                                    <div class="gigantic pagination-variable" id="pg2">
                                                                        <a href="#" class="first" data-action="first">First</a>
                                                                        <a href="#" class="previous" data-action="previous"><span></span></a>
                                                                        <input type="text" readonly="readonly" class="page-field"/>
                                                                        <a href="#" class="next" data-action="next"><span></span></a>
                                                                        <a href="#" class="last" data-action="last">Last</a>
                                                                        <div class="pagi-goto"><span>Go to</span> <input type="text" class="goto-field" value="" id="pg-variable-goto" onchange="variablePaginationGoTo();"/></div>
                                                                    </div>
                                                                <!-- Pagination Start -->  
                                                                </div>
                                                            </div>
                                                            <!-- -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
					<!-- My Variables Panel-->
                                        <li class="panel">
                                            <a data-toggle="collapse" data-target="#pop-myvar" data-parent="#accordion" class="pop-acc-title acc-act">My Variables <span class="acc-arrow"></span></a>
                                            <div id="pop-myvar" class="collapse pop-acc-content">
					       <div class="popup-title-wrap">
					          <div class="pop-right-title-section">
						  <p>You can select a maximum of 10 variables, <span id="selected-my-variable-count-title"></span> selected. Click on a Variable to select it</p>
				 	       </div>
 						<!--  MY Variables   -->
						   <div class="popup-content-wrap clearfix">
                                                	<div class="popup-leftpanel">
                                                        <div class="variable-list-sec">
                                                            <h5 class="variable-title">Selected Variables<span id="selected-my-variable-count"></span></h5>
                                                            <table border="0" width="100%" class="variable-table" id="selected-my-variable"></table>
                                                        </div>
                                                        <span class="pop-leftbottom-con">you can remove a variable from the list by clicking the trash icon next to it.</span>
                                                    	</div>
                                                	<div class="popup-rightpanel">
                                                    	<div class="popup-right-content-sec">
                                                        	<!-- Category -->
                                                        	<div class="category-wrap">
                                                                <h4 class="pop-left-head">Selected Template</h4>
                                                                <div class="popup-selectbox-sec">
                                                                    <select class="custom_selectbox popup-selectbox" id="myVariableTempId" onchange="loadMyVariable()">
                                                                    </select>
                                                                </div>    
                                                            </div>
                                                            <!-- My Variable List Table -->
                                                            <table width="100%" border="0" class="popup-table" id="load-master-myvariable"></table>
                                                            <!-- -->
                                                            <div class="pagi-wrap">
                                                                <div class="pull-right">
                                                                    <!-- Pagination Start -->
                                                                    <div class="gigantic pagination-myvariable" id="myvar_pg1">
                                                                        <a href="#" class="first" data-action="first">First</a>
                                                                        <a href="#" class="previous" data-action="previous"><span></span></a>
                                                                        <input type="text" readonly="readonly" class="page-field"/>
                                                                        <a href="#" class="next" data-action="next"><span></span></a>
                                                                        <a href="#" class="last" data-action="last">Last</a>
                                                                        <div class="pagi-goto"><span>Go to</span> <input type="text" class="goto-field" id="pg-myvar-goto" onchange="myVariablePaginationGoTo()" value=""/></div>
                                                                    </div>
                                                                    <!-- Pagination Start -->  
                                                                </div>
                                                            </div>
                                                            <!-- -->
                                                        </div>
                                                    </div>
                                                </div>
					        <!--  MY Variables   --> 						
                                            </div>
                                        </li>
                                    </ul>
                                     <div class="button-wrap" style="text-align:left;">
                                        <button type="button" class="btn btn-primary btn-red" data-toggle="button" data-dismiss="modal" onclick="applySelectedVariableFilters()">Apply</button>
                                        <button type="button" class="btn btn-primary btn-gray" data-toggle="button" data-dismiss="modal" onclick="cancelSelection();">Cancel</button>
                                    </div>
                            </div>
                        </div>
                      </div>
                    </div>
                    <!-- -->
		    <div class="item-list-content scroll-pane">
		       <ul class="nav navbar-nav item-panel-list2" id="tableId"></ul>
		    </div>
		    <div id="item-btn-float" class="item-btn-wrap" >
		       <button type="button" value="Apply" class="btn btn-primary btn-red item-list-btn" onclick="onViewMyVariable()">Apply</button>
		    </div>
                </div>
		<!-- Contextual Variables end -->
		<!-- My Variables start -->
                <div class="item-panel pos-rel" id="my-var">
                   <h5 class="left-con-head">My Variables<a class="add" data-toggle="modal" data-target=".contextual-variable" onclick='myVarClick();'></a></h5>
		   <div class="item-list-content scroll-pane">
                      <ul class="nav navbar-nav item-panel-list2" id="my-variable-tableId"></ul>
                   </div>
		   <div id="item-btn-float" class="item-btn-wrap" >
		      <button type="button" value="Apply" class="btn btn-primary btn-red item-list-btn" onclick="onViewMyVariable()">Apply</button>
		   </div>
                </div>

		<!-- My Variables end -->
            </div>
            <!--Main body right panel -->
            <div class="col-md-7-5 right-panel">
            	<div class="title-wrap">
                    <ol class="breadcrumb">
                      <li><a id="page-title-top-id"></a></li>
                      <!--<li><a>Ariyalur</a></li>-->
                      <li class="active"><span id="page-title-active-filter"></span></li>
                    </ol>
                    <a class="help" data-popover="true" data-html=true data-content="Filters allows you to filter locations at the settlement level (i.e. City/town/village) by up to 10 criteria.  To apply a filter <br>
&nbsp;&nbsp;<strong>(1)</strong>&nbsp;&nbsp;Click on your variable of choice to open a filter slider ,<br>
&nbsp;&nbsp;<strong>(2)</strong>&nbsp;&nbsp;Move the slider to the range of your choice <br>
&nbsp;&nbsp;<strong>(3)</strong>&nbsp;&nbsp;Click Apply. <br><br>
<strong>Note that:</strong>
<br>
&nbsp;&nbsp;<strong>*</strong>&nbsp;&nbsp;Filtering at the Village Level can only be done for a selected District or Taluk due to the large number of locations at the State level.<br>
&nbsp;&nbsp;<strong>*</strong>&nbsp;&nbsp;If a large number of results are obtained, an aggregated value will be shown for a sub-area in a green circle.  Clicking on the green circle will zoom in to the area to see the specific locations.
Hover over a location marker to see its name and a summary.  <br>" id="help"></a>

                </div>
                <div class="tab-wrap">
                    <div class="tab-sec filter-tab">
			<div class="btn-group" data-toggle="buttons-radio">
                        <ul class="nav nav-tabs" role="tablist" >
                          <li id="map-id" class="active"><a href="#mapview" data-view="mapview" data-toggle="tab" role="tab" id="tab-map" class="" onclick="d3.select('#map').style('display','block'); dataLoad();">Map<span class="tab-icon"></span></a></li>
                          <li id="grid-id"><a href="#grid" data-view="grid" role="tab" data-toggle="tab" id="tab-grid" class="" onclick="d3.select('#map').style('display','none');">List<span class="tab-icon"></span></a></li>
                        </ul>
			</div>
                    </div>
                </div>
                <div class="right-content-panel">

                	<!-- Tab panes -->
                    <div class="tab-content filter-tab-container" style="display:block;">
                    <!--<h2 class="page-title" id="page-title-id"><span class="page-subtitle"></span></h2>-->
                      <div class="tab-pane active" id="mapview">
			<div id="map"></div>
			<!--<div class="data-explorer-here"></div>-->
			
                        <div class="button-wrap">
			<input type="button" class="map-save-tab" id='output' data-toggle="modal" data-target=".my-save" value="Save" style="margin-left: 375px;"/>
			<!-- canvas -->
			<!-- Pop Up Panel my-save-->
				  <div class="modal fade my-save" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
				    <div class="modal-dialog modal-lg">
				      <div class="modal-content">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"></span><span class="sr-only">Close</span></button>
					<!-- Close -->
					<div class="</div>">
					<form id="ajaxform" action="/app/post_image_pins/" method="post" >{% csrf_token %}
					    <table width="100%" cellpadding="4" cellspacing="4">
						<tr>
						    <td>
							<div id="sample3"></div>
						    </td>
						</tr>
						<tr>
						    <td style="vertical-align: middle;" align="center">
							<textarea rows="3" cols="25" id="pin-form-description" name="description" placeholder="Description" class="text-field" style="margin-top: 10px;"></textarea><br><br>
							<input type="hidden" id="pin-form-tags" name="tags" value="Saved_Image" placeholder="Tags">
					  	        <input type="hidden" id="pin-form-image" name="image">
							<input type="hidden" id="imgWidth" name="width">
				     	                <input type="hidden" id="imgHeight" name="height">
							<input type="hidden" id="pathName" name="pathName">
							<!--<input type="submit" class="btn btn-primary btn-red" value="Save Image" />-->
							<input type="button" class="btn btn-primary btn-red" value="Save Image" onclick="applySaveImage()" />
						    </td>
						</tr>
					    </table>
					</form>	
					</div>
				      </div>
				    </div>
				  </div>
			<!-- canvas -->

                        </div>
                      </div>
                      <div class="tab-pane" id="grid">
  	
                           <div class="popup-panel">
                            	<!--<div class="popup-title">Lorem ipsum dolor sit amet, consectetur </div>-->
                                <div class="popup-body">
                                	<div class="popup-area-sec clearfix" id="gridId">
                                        <!--ul class="popup-area-list">
                                            <label class="popup-label"><input type="checkbox" class="popup-cb">Ariyalur</label>
                                            <li><a href="#">Ariyalur</a></li>
                                            <li><a href="#">Sendurai</a></li>
                                            <li><a href="#">Udayarpalayam</a></li>
                                            <li><a href="#">Egmore-Nungambakkam</a></li>
                                            <li><a href="#">Kottai-Thondiarpet</a></li>
                                        </ul>-->
                                     </div>
				<!-- canvas -->
					<!-- Pop Up Panel saved list -->
					<div class="button-wrap">
					  <div class="modal fade my-savedlist" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
					    <div class="modal-dialog modal-lg">
					      <div class="modal-content">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"></span><span class="sr-only">Close</span></button>
						<!-- Close -->
						<div class="</div>">
						<form id="savedlist-ajaxform" action="/app/mysphere_saved_list" method="post" >{% csrf_token %}
						    <table width="100%" cellpadding="4" cellspacing="4">
							<tr>
							    <td style="vertical-align: middle;" align="center">
								<textarea rows="3" cols="25" id="pin-savedlist-form-desc" name="savedlist-desc" placeholder="Description" class="text-field" style="margin-top: 10px;"></textarea><br><br>
								<input type="hidden" id="url-path" name="urlpath">
								<input type="hidden" id="list-name" name="listname">
								<!--<input type="submit" class="btn btn-primary btn-red" value="Save"/>-->
								<input type="button" class="btn btn-primary btn-red" value="Save" onclick="applySaveList()" />
							    </td>
							</tr>
						    </table>
						</form>	
						</div>
					      </div>
					    </div>
					  </div>
					</div>
				<!-- canvas -->

                                     <!--<div class="pagi-wrap">
                                     	<div class="pull-right">
                                            <!-- Pagination Start >
                                                <div class="gigantic pagination" id="pg1">
                                                    <a href="#" class="first" data-action="first" id="gridFirstId">First</a>
                                                    <a href="#" class="previous" data-action="previous" id="gridPreviousId"><span></span></a>
                                                    <input type="text" readonly="readonly" class="page-field" id="page-id"/>
                                                    <a href="#" class="next" data-action="next" id="gridNextId"><span></span></a>
                                                    <a href="#" class="last" data-action="last" id="gridLastId">Last</a>
                                                    <div class="pagi-goto"><span>Go to</span> <input type="text" class="goto-field" value="" id="pg-grid-goto" onchange="gridPaginationGoTo();"/></div>
                                                </div>
                                            <!-- Pagination Start > 
                                        </div>
                                     </div>-->
                                </div>
                                <div class="button-wrap">
                                    <button type="button" class="btn btn-primary btn-red" data-toggle="modal" data-target=".my-savedlist" onclick="saveMysphereList();">Save</button>
                                    <button type="button" class="btn btn-primary btn-csv" data-toggle="button" onclick="downloadCSV()"></button>
                                </div>
                            </div>
                           <!-- -->
                      </div>
                    </div>
                    <!-- -->
     		<!-- -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- popup tooltip -->
	<div id="stickytooltip" class="stickytooltip">
		<div class="sticky-tool-inner" id="sticky-tool-inner">
		<!-- -->
		</div>
	</div>
	<div class="stickytooltip2">
		<div class="st-arrow"></div>
	</div>	
 <!-- popup tooltip -->
{% include "footer.html" %}
<script type="text/javascript" src="/static/filters_layers/explore-filter.{{ JS_MD5_FILTER }}.js"></script>
<script type="text/javascript" src="/static/common_js/common_variable.{{ JS_MD5_COMMON }}.js"></script>

<script type="text/javascript" src="/static/js/cilogi-marker.js"></script><!-- tooltip for popup on variables -->
<script type="text/javascript" src="/static/js/html2canvas.js"></script><!-- tooltip for popup on variables -->
</body>
</html>

